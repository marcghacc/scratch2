(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{IeL7:function(t,e,i){"use strict";i.r(e),i.d(e,"MyProfileModule",(function(){return n}));var r=i("ofXK"),o=i("PCNd"),s=i("rIor"),a=i("fXoL"),n=function(){function t(){}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[r.c,s.b,o.a]]}),t}()},rIor:function(t,e,i){"use strict";i.d(e,"a",(function(){return u})),i.d(e,"b",(function(){return m}));var r=i("1OyB"),o=i("vuIU"),s=i("fXoL"),a=i("ofXK"),n=i("jhN1"),h=["sourceImage"];function c(t,e){if(1&t){var i=s.Tb();s.Sb(0,"div",3),s.Sb(1,"div",4),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"move")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"move")})),s.Ic(2,"\xa0"),s.Rb(),s.Sb(3,"span",5),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"resize","topleft")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"resize","topleft")})),s.Nb(4,"span",6),s.Rb(),s.Sb(5,"span",7),s.Nb(6,"span",6),s.Rb(),s.Sb(7,"span",8),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"resize","topright")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"resize","topright")})),s.Nb(8,"span",6),s.Rb(),s.Sb(9,"span",9),s.Nb(10,"span",6),s.Rb(),s.Sb(11,"span",10),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"resize","bottomright")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"resize","bottomright")})),s.Nb(12,"span",6),s.Rb(),s.Sb(13,"span",11),s.Nb(14,"span",6),s.Rb(),s.Sb(15,"span",12),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"resize","bottomleft")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"resize","bottomleft")})),s.Nb(16,"span",6),s.Rb(),s.Sb(17,"span",13),s.Nb(18,"span",6),s.Rb(),s.Sb(19,"span",14),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"resize","top")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"resize","top")})),s.Rb(),s.Sb(20,"span",15),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"resize","right")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"resize","right")})),s.Rb(),s.Sb(21,"span",16),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"resize","bottom")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"resize","bottom")})),s.Rb(),s.Sb(22,"span",17),s.Zb("mousedown",(function(t){return s.yc(i),s.dc().startMove(t,"resize","left")}))("touchstart",(function(t){return s.yc(i),s.dc().startMove(t,"resize","left")})),s.Rb(),s.Rb()}if(2&t){var r=s.dc();s.Ec("top",r.cropper.y1,"px")("left",r.cropper.x1,"px")("width",r.cropper.x2-r.cropper.x1,"px")("height",r.cropper.y2-r.cropper.y1,"px")("margin-left","center"===r.alignImage?r.marginLeft:null)("visibility",r.imageVisible?"visible":"hidden"),s.Eb("rounded",r.roundCropper)}}function p(t,e){return new Promise((function(i,r){var o=new Image;o.onload=function(){var t=o.width,s=o.height,a=document.createElement("canvas"),n=a.getContext("2d");n?(4<e&&e<9?(a.width=s,a.height=t):(a.width=t,a.height=s),function(t,e,i,r){switch(e){case 2:t.transform(-1,0,0,1,i,0);break;case 3:t.transform(-1,0,0,-1,i,r);break;case 4:t.transform(1,0,0,-1,0,r);break;case 5:t.transform(0,1,1,0,0,0);break;case 6:t.transform(0,1,-1,0,r,0);break;case 7:t.transform(0,-1,-1,0,r,i);break;case 8:t.transform(0,-1,1,0,0,i)}}(n,e,t,s),n.drawImage(o,0,0),i(a.toDataURL())):r(new Error("No context"))},o.src=t}))}function g(t,e,i){var r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=t.width,s=t.height,a=o/(e=Math.round(e)),n=s/(i=Math.round(i)),h=Math.ceil(a/2),c=Math.ceil(n/2),p=t.getContext("2d");if(p){for(var g=p.getImageData(0,0,o,s),u=p.createImageData(e,i),m=g.data,l=u.data,d=0;d<i;d++)for(var f=0;f<e;f++){var v=4*(f+d*e),x=d*n,y=0,M=0,b=0,C=0,z=0,S=0,w=0,R=Math.floor(f*a),k=Math.floor(d*n),P=Math.ceil((f+1)*a),I=Math.ceil((d+1)*n);P=Math.min(P,o),I=Math.min(I,s);for(var O=k;O<I;O++)for(var _=Math.abs(x-O)/c,A=f*a,W=_*_,T=R;T<P;T++){var H=Math.abs(A-T)/h,B=Math.sqrt(W+H*H);if(!(B>=1)){var E=4*(T+O*o);w+=(y=2*B*B*B-3*B*B+1)*m[E+3],b+=y,m[E+3]<255&&(y=y*m[E+3]/250),C+=y*m[E],z+=y*m[E+1],S+=y*m[E+2],M+=y}}l[v]=C/M,l[v+1]=z/M,l[v+2]=S/M,l[v+3]=w/b}r?(t.width=e,t.height=i):p.clearRect(0,0,o,s),p.putImageData(u,0,0)}}var u=function(){var t=function(){return Object(o.a)((function t(e,i,o){Object(r.a)(this,t),this.sanitizer=e,this.cd=i,this.zone=o,this.setImageMaxSizeRetries=0,this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20,this.marginLeft="0px",this.imageVisible=!1,this.format="png",this.outputType="both",this.maintainAspectRatio=!0,this.aspectRatio=1,this.resizeToWidth=0,this.resizeToHeight=0,this.cropperMinWidth=0,this.cropperMinHeight=0,this.roundCropper=!1,this.onlyScaleDown=!1,this.imageQuality=92,this.autoCrop=!0,this.containWithinAspectRatio=!1,this.cropper={x1:-100,y1:-100,x2:1e4,y2:1e4},this.alignImage="center",this.startCropImage=new s.n,this.imageCropped=new s.n,this.imageCroppedBase64=new s.n,this.imageCroppedFile=new s.n,this.imageLoaded=new s.n,this.cropperReady=new s.n,this.loadImageFailed=new s.n,this.initCropper()}),[{key:"imageFileChanged",set:function(t){this.initCropper(),t&&this.loadImageFile(t)}},{key:"imageChangedEvent",set:function(t){this.initCropper(),t&&t.target&&t.target.files&&t.target.files.length>0&&this.loadImageFile(t.target.files[0])}},{key:"imageBase64",set:function(t){this.initCropper(),this.checkExifAndLoadBase64Image(t)}},{key:"ngOnChanges",value:function(t){t.cropper&&(this.setMaxSize(),this.setCropperScaledMinSize(),this.checkCropperPosition(!1),this.doAutoCrop(),this.cd.markForCheck()),t.aspectRatio&&this.imageVisible&&this.resetCropperPosition()}},{key:"initCropper",value:function(){this.imageVisible=!1,this.originalImage=null,this.safeImgDataUrl="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=",this.moveStart={active:!1,type:null,position:null,x1:0,y1:0,x2:0,y2:0,clientX:0,clientY:0},this.maxSize={width:0,height:0},this.originalSize={width:0,height:0},this.cropper.x1=-100,this.cropper.y1=-100,this.cropper.x2=1e4,this.cropper.y2=1e4}},{key:"loadImageFile",value:function(t){var e=this,i=new FileReader;i.onload=function(i){e.isValidImageType(t.type)?e.checkExifAndLoadBase64Image(i.target.result):e.loadImageFailed.emit()},i.readAsDataURL(t)}},{key:"isValidImageType",value:function(t){return/image\/(png|jpg|jpeg|bmp|gif|tiff)/.test(t)}},{key:"checkExifAndLoadBase64Image",value:function(t){var e=this;(function(t){try{var e=function(t){var e=new DataView(function(t){t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var e=atob(t),i=e.length,r=new Uint8Array(i),o=0;o<i;o++)r[o]=e.charCodeAt(o);return r.buffer}(t));if(65496!=e.getUint16(0,!1))return-2;for(var i=e.byteLength,r=2;r<i;){if(e.getUint16(r+2,!1)<=8)return-1;var o=e.getUint16(r,!1);if(r+=2,65505==o){if(1165519206!=e.getUint32(r+=2,!1))return-1;var s=18761==e.getUint16(r+=6,!1);r+=e.getUint32(r+4,s);var a=e.getUint16(r,s);r+=2;for(var n=0;n<a;n++)if(274==e.getUint16(r+12*n,s))return e.getUint16(r+12*n+8,s)}else{if(65280!=(65280&o))break;r+=e.getUint16(r,!1)}}return-1}(t);return e>1?p(t,e):Promise.resolve(t)}catch(i){return Promise.reject(i)}})(t).then((function(t){return e.fitImageToAspectRatio(t)})).then((function(t){return e.loadBase64Image(t)})).catch((function(){return e.loadImageFailed.emit()}))}},{key:"fitImageToAspectRatio",value:function(t){return this.containWithinAspectRatio?(e=t,i=this.aspectRatio,new Promise((function(t,r){var o=new Image;o.onload=function(){var e=document.createElement("canvas"),s=e.getContext("2d");if(s){var a=o.width/i;e.width=Math.max(o.width,o.height*i),e.height=Math.max(o.height,a),s.drawImage(o,(e.width-o.width)/2,(e.height-o.height)/2),t(e.toDataURL())}else r(new Error("No context"))},o.src=e}))):Promise.resolve(t);var e,i}},{key:"loadBase64Image",value:function(t){var e=this;this.originalBase64=t,this.safeImgDataUrl=this.sanitizer.bypassSecurityTrustResourceUrl(t),this.originalImage=new Image,this.originalImage.onload=function(){e.originalSize.width=e.originalImage.width,e.originalSize.height=e.originalImage.height,e.cd.markForCheck()},this.originalImage.src=t}},{key:"imageLoadedInView",value:function(){var t=this;null!=this.originalImage&&(this.imageLoaded.emit(),this.setImageMaxSizeRetries=0,setTimeout((function(){return t.checkImageMaxSizeRecursively()})))}},{key:"checkImageMaxSizeRecursively",value:function(){var t=this;this.setImageMaxSizeRetries>40?this.loadImageFailed.emit():this.sourceImage&&this.sourceImage.nativeElement&&this.sourceImage.nativeElement.offsetWidth>0?(this.setMaxSize(),this.setCropperScaledMinSize(),this.resetCropperPosition(),this.cropperReady.emit(),this.cd.markForCheck()):(this.setImageMaxSizeRetries++,setTimeout((function(){t.checkImageMaxSizeRecursively()}),50))}},{key:"onResize",value:function(){this.resizeCropperPosition(),this.setMaxSize(),this.setCropperScaledMinSize()}},{key:"rotateLeft",value:function(){this.transformBase64(8)}},{key:"rotateRight",value:function(){this.transformBase64(6)}},{key:"flipHorizontal",value:function(){this.transformBase64(2)}},{key:"flipVertical",value:function(){this.transformBase64(4)}},{key:"transformBase64",value:function(t){var e=this;this.originalBase64&&p(this.originalBase64,t).then((function(t){return e.fitImageToAspectRatio(t)})).then((function(t){return e.loadBase64Image(t)}))}},{key:"resizeCropperPosition",value:function(){var t=this.sourceImage.nativeElement;this.maxSize.width===t.offsetWidth&&this.maxSize.height===t.offsetHeight||(this.cropper.x1=this.cropper.x1*t.offsetWidth/this.maxSize.width,this.cropper.x2=this.cropper.x2*t.offsetWidth/this.maxSize.width,this.cropper.y1=this.cropper.y1*t.offsetHeight/this.maxSize.height,this.cropper.y2=this.cropper.y2*t.offsetHeight/this.maxSize.height)}},{key:"resetCropperPosition",value:function(){var t=this.sourceImage.nativeElement;if(this.maintainAspectRatio)if(t.offsetWidth/this.aspectRatio<t.offsetHeight){this.cropper.x1=0,this.cropper.x2=t.offsetWidth;var e=t.offsetWidth/this.aspectRatio;this.cropper.y1=(t.offsetHeight-e)/2,this.cropper.y2=this.cropper.y1+e}else{this.cropper.y1=0,this.cropper.y2=t.offsetHeight;var i=t.offsetHeight*this.aspectRatio;this.cropper.x1=(t.offsetWidth-i)/2,this.cropper.x2=this.cropper.x1+i}else this.cropper.x1=0,this.cropper.x2=t.offsetWidth,this.cropper.y1=0,this.cropper.y2=t.offsetHeight;this.doAutoCrop(),this.imageVisible=!0}},{key:"startMove",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;t.preventDefault(),this.moveStart=Object.assign({active:!0,type:e,position:i,clientX:this.getClientX(t),clientY:this.getClientY(t)},this.cropper)}},{key:"moveImg",value:function(t){this.moveStart.active&&(t.stopPropagation(),t.preventDefault(),"move"===this.moveStart.type?(this.move(t),this.checkCropperPosition(!0)):"resize"===this.moveStart.type&&(this.resize(t),this.checkCropperPosition(!1)),this.cd.detectChanges())}},{key:"setMaxSize",value:function(){if(this.sourceImage){var t=this.sourceImage.nativeElement;this.maxSize.width=t.offsetWidth,this.maxSize.height=t.offsetHeight,this.marginLeft=this.sanitizer.bypassSecurityTrustStyle("calc(50% - "+this.maxSize.width/2+"px)")}}},{key:"setCropperScaledMinSize",value:function(){this.originalImage?(this.setCropperScaledMinWidth(),this.setCropperScaledMinHeight()):(this.cropperScaledMinWidth=20,this.cropperScaledMinHeight=20)}},{key:"setCropperScaledMinWidth",value:function(){this.cropperScaledMinWidth=this.cropperMinWidth>0?Math.max(20,this.cropperMinWidth/this.originalImage.width*this.maxSize.width):20}},{key:"setCropperScaledMinHeight",value:function(){this.cropperScaledMinHeight=this.maintainAspectRatio?Math.max(20,this.cropperScaledMinWidth/this.aspectRatio):this.cropperMinHeight>0?Math.max(20,this.cropperMinHeight/this.originalImage.height*this.maxSize.height):20}},{key:"checkCropperPosition",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.cropper.x1<0&&(this.cropper.x2-=t?this.cropper.x1:0,this.cropper.x1=0),this.cropper.y1<0&&(this.cropper.y2-=t?this.cropper.y1:0,this.cropper.y1=0),this.cropper.x2>this.maxSize.width&&(this.cropper.x1-=t?this.cropper.x2-this.maxSize.width:0,this.cropper.x2=this.maxSize.width),this.cropper.y2>this.maxSize.height&&(this.cropper.y1-=t?this.cropper.y2-this.maxSize.height:0,this.cropper.y2=this.maxSize.height)}},{key:"moveStop",value:function(){this.moveStart.active&&(this.moveStart.active=!1,this.doAutoCrop())}},{key:"move",value:function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;this.cropper.x1=this.moveStart.x1+e,this.cropper.y1=this.moveStart.y1+i,this.cropper.x2=this.moveStart.x2+e,this.cropper.y2=this.moveStart.y2+i}},{key:"resize",value:function(t){var e=this.getClientX(t)-this.moveStart.clientX,i=this.getClientY(t)-this.moveStart.clientY;switch(this.moveStart.position){case"left":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth);break;case"topleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"top":this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"topright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y1=Math.min(this.moveStart.y1+i,this.cropper.y2-this.cropperScaledMinHeight);break;case"right":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth);break;case"bottomright":this.cropper.x2=Math.max(this.moveStart.x2+e,this.cropper.x1+this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottom":this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight);break;case"bottomleft":this.cropper.x1=Math.min(this.moveStart.x1+e,this.cropper.x2-this.cropperScaledMinWidth),this.cropper.y2=Math.max(this.moveStart.y2+i,this.cropper.y1+this.cropperScaledMinHeight)}this.maintainAspectRatio&&this.checkAspectRatio()}},{key:"checkAspectRatio",value:function(){var t=0,e=0;switch(this.moveStart.position){case"top":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"bottom":this.cropper.x2=this.cropper.x1+(this.cropper.y2-this.cropper.y1)*this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topleft":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"topright":this.cropper.y1=this.cropper.y2-(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(0-this.cropper.y1,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y1+=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"right":case"bottomright":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(this.cropper.x2-this.maxSize.width,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x2-=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio);break;case"left":case"bottomleft":this.cropper.y2=this.cropper.y1+(this.cropper.x2-this.cropper.x1)/this.aspectRatio,t=Math.max(0-this.cropper.x1,0),e=Math.max(this.cropper.y2-this.maxSize.height,0),(t>0||e>0)&&(this.cropper.x1+=e*this.aspectRatio>t?e*this.aspectRatio:t,this.cropper.y2-=e*this.aspectRatio>t?e:t/this.aspectRatio)}}},{key:"doAutoCrop",value:function(){this.autoCrop&&this.crop()}},{key:"crop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.outputType;if(this.sourceImage.nativeElement&&null!=this.originalImage){this.startCropImage.emit();var e=this.getImagePosition(),i=e.x2-e.x1,r=e.y2-e.y1,o=document.createElement("canvas");o.width=i,o.height=r;var s=o.getContext("2d");if(s){null!=this.backgroundColor&&(s.fillStyle=this.backgroundColor,s.fillRect(0,0,i,r)),s.drawImage(this.originalImage,e.x1,e.y1,i,r,0,0,i,r);var a={width:i,height:r,imagePosition:e,cropperPosition:Object.assign({},this.cropper)},n=this.getResizeRatio(i,r);return 1!==n&&(a.width=Math.round(i*n),a.height=this.maintainAspectRatio?Math.round(a.width/this.aspectRatio):Math.round(r*n),g(o,a.width,a.height)),this.cropToOutputType(t,o,a)}}return null}},{key:"getImagePosition",value:function(){var t=this.originalSize.width/this.sourceImage.nativeElement.offsetWidth;return{x1:Math.round(this.cropper.x1*t),y1:Math.round(this.cropper.y1*t),x2:Math.min(Math.round(this.cropper.x2*t),this.originalSize.width),y2:Math.min(Math.round(this.cropper.y2*t),this.originalSize.height)}}},{key:"cropToOutputType",value:function(t,e,i){var r=this;switch(t){case"file":return this.cropToFile(e).then((function(t){return i.file=t,r.imageCropped.emit(i),i}));case"both":return i.base64=this.cropToBase64(e),this.cropToFile(e).then((function(t){return i.file=t,r.imageCropped.emit(i),i}));default:return i.base64=this.cropToBase64(e),this.imageCropped.emit(i),i}}},{key:"cropToBase64",value:function(t){var e=t.toDataURL("image/"+this.format,this.getQuality());return this.imageCroppedBase64.emit(e),e}},{key:"cropToFile",value:function(t){var e=this;return this.getCanvasBlob(t).then((function(t){return t&&e.imageCroppedFile.emit(t),t}))}},{key:"getCanvasBlob",value:function(t){var e=this;return new Promise((function(i){t.toBlob((function(t){return e.zone.run((function(){return i(t)}))}),"image/"+e.format,e.getQuality())}))}},{key:"getQuality",value:function(){return Math.min(1,Math.max(0,this.imageQuality/100))}},{key:"getResizeRatio",value:function(t,e){if(this.resizeToWidth>0){if(!this.onlyScaleDown||t>this.resizeToWidth)return this.resizeToWidth/t}else if(this.resizeToHeight>0&&(!this.onlyScaleDown||e>this.resizeToHeight))return this.resizeToHeight/e;return 1}},{key:"getClientX",value:function(t){return t.touches&&t.touches[0]&&t.touches[0].clientX||t.clientX}},{key:"getClientY",value:function(t){return t.touches&&t.touches[0]&&t.touches[0].clientY||t.clientY}}])}();return t.\u0275fac=function(e){return new(e||t)(s.Mb(n.b),s.Mb(s.h),s.Mb(s.z))},t.\u0275cmp=s.Gb({type:t,selectors:[["image-cropper"]],viewQuery:function(t,e){var i;1&t&&s.Cc(h,!0),2&t&&s.uc(i=s.ac())&&(e.sourceImage=i.first)},hostVars:2,hostBindings:function(t,e){1&t&&s.Zb("resize",(function(){return e.onResize()}),!1,s.xc)("mousemove",(function(t){return e.moveImg(t)}),!1,s.wc)("touchmove",(function(t){return e.moveImg(t)}),!1,s.wc)("mouseup",(function(){return e.moveStop()}),!1,s.wc)("touchend",(function(){return e.moveStop()}),!1,s.wc),2&t&&s.Ec("text-align",e.alignImage)},inputs:{format:"format",outputType:"outputType",maintainAspectRatio:"maintainAspectRatio",aspectRatio:"aspectRatio",resizeToWidth:"resizeToWidth",resizeToHeight:"resizeToHeight",cropperMinWidth:"cropperMinWidth",cropperMinHeight:"cropperMinHeight",roundCropper:"roundCropper",onlyScaleDown:"onlyScaleDown",imageQuality:"imageQuality",autoCrop:"autoCrop",containWithinAspectRatio:"containWithinAspectRatio",cropper:"cropper",alignImage:"alignImage",imageFileChanged:"imageFileChanged",imageChangedEvent:"imageChangedEvent",imageBase64:"imageBase64",backgroundColor:"backgroundColor"},outputs:{startCropImage:"startCropImage",imageCropped:"imageCropped",imageCroppedBase64:"imageCroppedBase64",imageCroppedFile:"imageCroppedFile",imageLoaded:"imageLoaded",cropperReady:"cropperReady",loadImageFailed:"loadImageFailed"},features:[s.yb],decls:4,vars:6,consts:[[1,"source-image",3,"src","load"],["sourceImage",""],["class","cropper",3,"rounded","top","left","width","height","margin-left","visibility",4,"ngIf"],[1,"cropper"],[1,"move",3,"mousedown","touchstart"],[1,"resize","topleft",3,"mousedown","touchstart"],[1,"square"],[1,"resize","top"],[1,"resize","topright",3,"mousedown","touchstart"],[1,"resize","right"],[1,"resize","bottomright",3,"mousedown","touchstart"],[1,"resize","bottom"],[1,"resize","bottomleft",3,"mousedown","touchstart"],[1,"resize","left"],[1,"resize-bar","top",3,"mousedown","touchstart"],[1,"resize-bar","right",3,"mousedown","touchstart"],[1,"resize-bar","bottom",3,"mousedown","touchstart"],[1,"resize-bar","left",3,"mousedown","touchstart"]],template:function(t,e){1&t&&(s.Sb(0,"div"),s.Sb(1,"img",0,1),s.Zb("load",(function(){return e.imageLoadedInView()})),s.Rb(),s.Gc(3,c,23,14,"div",2),s.Rb()),2&t&&(s.Ec("background",e.imageVisible&&e.backgroundColor),s.Ab(1),s.Ec("visibility",e.imageVisible?"visible":"hidden"),s.kc("src",e.safeImgDataUrl,s.Ac),s.Ab(2),s.kc("ngIf",e.imageVisible))},directives:[a.l],styles:['[_nghost-%COMP%]{display:flex;position:relative;width:100%;max-width:100%;max-height:100%;overflow:hidden;padding:5px;text-align:center;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%] > div[_ngcontent-%COMP%]{position:relative;width:100%}[_nghost-%COMP%] > div[_ngcontent-%COMP%]   img.source-image[_ngcontent-%COMP%]{max-width:100%;max-height:100%}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{position:absolute;display:flex;color:#53535c;background:0 0;touch-action:none;outline:rgba(255,255,255,.3) solid 100vw}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]:after{position:absolute;content:"";top:0;bottom:0;left:0;right:0;pointer-events:none;border:1px dashed;opacity:.75;color:inherit;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{width:100%;cursor:move;border:1px solid rgba(255,255,255,.5)}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]{position:absolute;display:inline-block;line-height:6px;padding:8px;opacity:.85;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize[_ngcontent-%COMP%]   .square[_ngcontent-%COMP%]{display:inline-block;background:#53535c;width:6px;height:6px;border:1px solid rgba(255,255,255,.5);box-sizing:content-box}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topleft[_ngcontent-%COMP%]{top:-12px;left:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.top[_ngcontent-%COMP%]{top:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.topright[_ngcontent-%COMP%]{top:-12px;right:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.right[_ngcontent-%COMP%]{top:calc(50% - 12px);right:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomright[_ngcontent-%COMP%]{bottom:-12px;right:-12px;cursor:nwse-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottom[_ngcontent-%COMP%]{bottom:-12px;left:calc(50% - 12px);cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.bottomleft[_ngcontent-%COMP%]{bottom:-12px;left:-12px;cursor:nesw-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize.left[_ngcontent-%COMP%]{top:calc(50% - 12px);left:-12px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar[_ngcontent-%COMP%]{position:absolute;z-index:1}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.top[_ngcontent-%COMP%]{top:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.right[_ngcontent-%COMP%]{top:11px;right:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.bottom[_ngcontent-%COMP%]{bottom:-11px;left:11px;width:calc(100% - 22px);height:22px;cursor:ns-resize}[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]   .resize-bar.left[_ngcontent-%COMP%]{top:11px;left:-11px;height:calc(100% - 22px);width:22px;cursor:ew-resize}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]{outline-color:transparent}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{border-radius:100%;box-shadow:0 0 0 100vw rgba(255,255,255,.3)}@media (orientation:portrait){[_nghost-%COMP%]   .cropper[_ngcontent-%COMP%]{outline-width:100vh}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]:after{box-shadow:0 0 0 100vh rgba(255,255,255,.3)}}[_nghost-%COMP%]   .cropper.rounded[_ngcontent-%COMP%]   .move[_ngcontent-%COMP%]{border-radius:100%}'],changeDetection:0}),t}(),m=function(){var t=Object(o.a)((function t(){Object(r.a)(this,t)}));return t.\u0275mod=s.Kb({type:t}),t.\u0275inj=s.Jb({factory:function(e){return new(e||t)},imports:[[a.c]]}),t}()}}]);