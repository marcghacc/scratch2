(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{UFnY:function(e,t,o){"use strict";o.r(t),o.d(t,"PublicModule",(function(){return A}));var n=o("ofXK"),i=o("tyNb"),s=o("E8h8"),r=o("lOge"),c=o("L5wJ"),a=o("BsQw"),u=o("p0es"),p=o("aR35"),l=o("mjEz"),h=o("fust"),b=o("xLjT"),d=o("46Wp"),g=o("I0Vl"),f=o("7AKx"),v=o("22oA"),m=o("fXoL"),y=o("tRhJ"),w=o("Dqcb"),S=function(){return{width:"100%",height:"100%"}},k=function(){function e(e,t,o,n,i,s,r,c,a,u,p,l,h){var b=this;this.activatedRoute=e,this.sessionService=t,this.authService=o,this.router=n,this.appsHelper=i,this.settingsHelper=s,this.settingsService=r,this.tagsHelper=c,this.favoritesHelper=a,this.appsService=u,this.nodeApi=p,this.permissionService=l,this.appLibraryHelper=h,this.exchangeFail=!1,this.errorModalContent=[{title:"Whoops! MyApps Failed to Connect!",description:"\n      There was an issue loading into MyApps\n      ",imagePath:"assets/images/lp-error-graphic.svg",imageAlt:"Connection Error"}],this.subscriptions=[],this.subscriptions[0]=e.queryParams.subscribe((function(e){return b.onParamsUpdate(e)}))}return e.prototype.ngOnDestroy=function(){this.subscriptions.forEach((function(e){return e.unsubscribe()}))},e.prototype.onParamsUpdate=function(e){var t=this;e&&e.code?this.authService.getToken(e).subscribe((function(e){"number"!=typeof e?t.allowLogin(e):t.rejectLogin(e)}),(function(e){t.rejectLogin(e)})):this.sessionService.getAuthorized()?this.router.navigateByUrl("/home"):e&&e.code?this.authService.getToken(e).subscribe((function(e){"number"!=typeof e?t.allowLogin(e):t.rejectLogin(e)})):this.login()},e.prototype.login=function(){var e=this.urlEncode(p.a.launchpadUrl+"/oauth2/v2/auth",{scope:"full",redirect_uri:window.location.origin+"/oauth/",client_id:p.a.clientId,response_type:"code"});window.open(e,"_self")},e.prototype.urlEncode=function(e,t){return e+"?"+Object.keys(t).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(t[e])})).join("&")},e.prototype.allowLogin=function(e){var t=e.body,o=t.token,n=t.gwsToken;document.cookie=l.a.COOKIE_KEY+"=true;path=/;samesite=none;secure",this.sessionService.setBearerToken(o),this.sessionService.setGwsToken(n),this.sessionService.setAuthorized(!0),this.router.navigateByUrl("/home")},e.prototype.logout=function(){window.open(p.a.launchpadUrl+"/logout","_self")},e.prototype.rejectLogin=function(e){this.sessionService.setAuthorized(!1),e>500?this.exchangeFail=!0:window.open(p.a.launchpadUrl,"_self")},e.\u0275fac=function(t){return new(t||e)(m.Mb(i.a),m.Mb(s.a),m.Mb(r.a),m.Mb(i.d),m.Mb(c.a),m.Mb(a.a),m.Mb(u.a),m.Mb(h.a),m.Mb(b.a),m.Mb(d.a),m.Mb(f.a),m.Mb(g.b),m.Mb(v.a))},e.\u0275cmp=m.Gb({type:e,selectors:[["app-oauth"]],decls:17,vars:9,consts:[[3,"fadeOut"],[3,"ngStyle"],[1,"exchange-modal",3,"visible","showCloseIcon","clickOutsideToClose","escapeToClose"],[1,"exchange-content"],[2,"width","100%",3,"src","alt"],[1,"content-ctnr"],[1,"button","button-primary",3,"click"],[1,"button-text",3,"click"],[1,"fas","fa-sign-in"],[1,"label-text"]],template:function(e,t){1&e&&(m.Nb(0,"app-app-loader",0),m.Nb(1,"div",1),m.Sb(2,"cl-modal",2),m.Sb(3,"div",3),m.Nb(4,"img",4),m.Sb(5,"div",5),m.Sb(6,"h2"),m.Ic(7," Whoops! MyApps Failed to Connect! "),m.Rb(),m.Sb(8,"span"),m.Ic(9," There was an issue loading into MyApps "),m.Rb(),m.Sb(10,"div"),m.Sb(11,"button",6),m.Zb("click",(function(){return t.login()})),m.Ic(12," Retry "),m.Rb(),m.Sb(13,"button",7),m.Zb("click",(function(){return t.logout()})),m.Nb(14,"i",8),m.Sb(15,"span",9),m.Ic(16,"Back To Login"),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb(),m.Rb()),2&e&&(m.kc("fadeOut",t.exchangeFail),m.Ab(1),m.kc("ngStyle",m.mc(8,S)),m.Ab(1),m.kc("visible",t.exchangeFail)("showCloseIcon",!1)("clickOutsideToClose",!1)("escapeToClose",!1),m.Ab(2),m.kc("src",t.errorModalContent[0].imagePath,m.Ac)("alt",t.errorModalContent[0].imageAlt))},directives:[y.a,n.m,w.H],styles:[""]}),e}(),M=o("PCNd"),C=[{path:"oauth",component:k},{path:"**",redirectTo:"oauth"}],A=function(){function e(){}return e.\u0275mod=m.Kb({type:e}),e.\u0275inj=m.Jb({factory:function(t){return new(t||e)},imports:[[n.c,i.f.forChild(C),M.a]]}),e}()}}]);